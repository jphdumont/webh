<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title> URL Parameter and JSON Encryption </title>
<meta name="Generator" content="Author-it">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="Keywords" content="Internet Booking Engine (for Mobile Sites), URL Parameter and JSON Encryption">
<script type="text/javascript" src="dhtml_toc.js"></script>
<script type="text/javascript" src="open_parent.js"></script>
<STYLE type="text/css">
#Layer1 {
	position: absolute;
	left: 13px;
	top: 75px;
	z-index: 1;
	text-align:inherit;
	width: inherit;
}
#Layer2 {
	position: absolute;
	left: 13px;
	top: 200px;
	width: auto;
	height: auto;
	z-index: 2;
	vertical-align: bottom;
}
#Layer3 {
	position:absolute;
	left: 25px;
	top: 12px;
	width:45px;
	height: auto;
	margin-bottom:0px;
	z-index: 0;
}
#Layer4 {
	position:absolute;
	left: 100px;
	top: 12px;
	width:52px;
	height: auto;
	margin-bottom:0px;
	z-index: 0;
}
#Layer6 {
	position:absolute;
	top: 51px;
	width:43px;
	height: auto;
	margin-bottom:0px;
	right: 100px;
	z-index: 1;
}
#Layer10 {
	position:absolute;
	top: 51px;
	width:43px;
	height: auto;
	margin-bottom:0px;
	right: 25px;
	z-index: 1;
}
#Layer5 {
	position:absolute;
	left: 10px;
	top: 3px;
	width:207px;
	height: auto;
	margin-bottom:0px;
	z-index: 0;
}
#Layer9 {
	position:absolute;
	top: 0px;
	width:335px;
	height: auto;
	margin-bottom:0px;
	z-index: 0;
	right: 0px;
}
#Layer8 {
	position:absolute;
	left: 10px;
	top: 35px;
	width:100%;
	height: 10px;
	margin-bottom:15px;
	z-index: 2;
	background-color: #102E51;
}
#Layer11 {
	position:absolute;
	left: 13px;
	top: 50px;
	z-index: 1;
}
.footerbar {
	left: 15px;
	height: 14px;
	background-color: #102E51;
	width:100%;
}
.inthissection 
{
	font-family: Verdana, sans-serif;
	font-size: 9pt;
	color: #000000;
	margin-left: 0pt;
	text-align: left;
	text-indent: 0.75cm;
	width: 20cm;
	height: auto;
	white-space: normal;
	list-style-type: disc;
	list-style-position: outside;
	white-space:normal;
       }
.bodyseealso 
{display: block;
        font-family: verdana, arial, helvetica, sans-serif;
        font-size: 10pt;
        color: #000000;
        margin-top: 3pt;
        margin-bottom: 3pt;
        padding-top: 10pt;
        padding-bottom: 10pt;
        padding-left: 0pt;
        padding-right: 0pt;
		line-height:normal;
        float: left;
        clear: right;
        text-align: left;
        text-indent: 0cm;
        width: 6cm;
        height: auto;
        white-space: normal;
}   
th {vertical-align: bottom;
	text-align:center;
	font-size: 10pt;
}
.style1 {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 10px;
	color: #FFFFFF;
}

.breadcrumbs /*StyleList*/ {font-size: 11pt; font-family:Arial, Helvetica, sans-serif; color: #999999;}
.breadcrumbs A:link {text-decoration: none; color: #999999;}
.breadcrumbs A:active {text-decoration: none; color: #999999;}
.breadcrumbs A:visited {text-decoration: none; color: #999999;}
.breadcrumbs A:hover {text-decoration: underline; color: #102E51;}

</style>
</head>
<link rel="stylesheet" href="stylesheet.css" type"text/css" />
<link rel="stylesheet" href="stylesheet3.css"  type="text/css" />
<link rel="stylesheet" href="printstylesheet.css" type"text/css" media="print" />

<base target="BODY">

<body onLoad="navBarSwitch();if (isTOCLoaded()) {expand('1421_1');expand('1420');expand('1428');expand('2476');expand('1303');highlight('4624')}" text="#000000" link="#000099" alink="#000099" vlink="#000099">
<div id="Layer3"><a class="navbarOff" onClick="loadParent()" target="TOC" title="Opera Online Help Home"><img src="contents_button.jpg"></a></div>
<div id="Layer4"><a class="navbarOff" onClick="loadSearch()" target="TOC" title="Search Opera Online Help"><img src="search_button.jpg"></a></div>
<div class="breadcrumbs" id="Layer11">
	<p class="breadcrumbs"><a class="breadcrumblink" href="mobile_overview.htm">Mobile Overview</a><span class="breadcrumbdelimiter"> &gt; </span><a class="breadcrumblink" href="2476.htm">Using Site Manager</a><span class="breadcrumbdelimiter"> &gt; </span><a class="breadcrumblink" href="mystaymanager_site_settings.htm">Site Settings</a><span class="breadcrumbdelimiter"> &gt; </span><a class="breadcrumblink" href="myStayManager_manage_mobile_site.htm">Manage Site</a><span class="breadcrumbdelimiter"> &gt; </span><a class="breadcrumblink" href="myStayManager_back_end_1.htm">Backend Settings (Mobile Sites)</a><span class="breadcrumbactive"><span class="breadcrumbdelimiter"> &gt; </span>URL Parameter and JSON Encryption</span></p></div>
<div id="Layer6"><a onClick="emailPage()" target="_blank" class="navbarOn" title="Email Link to this Page"><img src="email_page_button.jpg" border="0"></a></div>
<div id="Layer10"><a onClick="feedBack()" target="_blank" class="navbarOn" title="Send Feedback on Topic"><img src="feedback_button.jpg" border="0"></a></div>
<!--<div id="Layer5"><a class="navbarOff" onClick="" target=""><img src="opera_9_darker_smaller.jpg"></a></div> -->
<div id="Layer9"><a class="navbarOff" onClick="" target=""><img src="opera_online_help_clouds_smaller_used.jpg"></a></div>
<div id="Layer8"></div>
<div id="Layer1"><h1 id="t4624" class="heading1">URL Parameter and JSON Encryption</h1>
<h3 id="p912864" fragmentId="27529" class="heading3">Two Different Types of Encryption:</h3>
<ol class="listnumber2"><li id="p912865" fragmentId="27523" class="listnumber2"><strong class="specialbold">URL Parameter Encryption. </strong>When URL Encryption is enabled in Site Manager the URLs to the Booking Path pages and the URLs in the Reservation Confirmation Email are automatically encrypted. In addition the encryption key can be added to the IBE deep links to encrypt the IBE URLs. </li><li id="p912866" fragmentId="27526" class="listnumber2"><strong class="specialbold">Encrypt JSON Messages. </strong>Select the checkbox to enable encryption for the JSON messages.</li></ol><h3 id="p912867" fragmentId="27534" class="heading3">Site Manager URL Parameter Encryption </h3>
<p id="p912868" fragmentId="26112" class="bodytext">When Encryption is Setup in MCP Backend Settings it is enabled for:</p>
<ul class="listbullet2"><li id="p912869" fragmentId="26104" class="listbullet2">/bp/login_with_nameid.cmd</li><li id="p912870" fragmentId="26105" class="listbullet2">/bp/availStart.jsp</li><li id="p912871" fragmentId="26106" class="listbullet2">/bp/search_rooms_cmd.jsp</li><li id="p912872" fragmentId="26107" class="listbullet2">/bp/search_regional.cmd</li><li id="p912873" fragmentId="26108" class="listbullet2">/bp/search_regional_cmd.jsp</li><li id="p912874" fragmentId="26109" class="listbullet2">/bp/view_reservation_detail.cmd</li><li id="p912875" fragmentId="25855" class="listbullet2">MCP Reservation Confirmation email </li></ul><p id="p912876" fragmentId="1" class="bodytext"></p>
<h3 id="p912877" fragmentId="27528" class="heading3">The Process to Add URL Encryption to a Site using the IBE URLs</h3>
<p id="p912878" fragmentId="26166" class="bodytext">If a Site is using a 3rd party content management system and IBE URLs these are the steps to enable encryption:</p>
<p id="p912879" fragmentId="27465" class="listcontinue"><strong class="specialbold">Step 1.</strong> Configure the Encryption in <strong class="specialbold">Site Manager</strong> &gt;<strong class="specialbold"> Manage Sites</strong> &gt; <strong class="specialbold">Backend Settings</strong> &gt; <strong class="specialbold">Encryption </strong></p>
<p id="p912880" fragmentId="26185" class="listcontinue"><strong class="specialbold">Step 2. </strong>Construct IBE URLs with Encrypted Parameters</p>
<p id="p912881" fragmentId="26186" class="listcontinue"><strong class="specialbold">Step 3. </strong>Encrypting the Parameters on a Sending Site</p>
<p id="p912882" fragmentId="27516" class="note"><strong class="specialbold">Note.</strong> It is recommended to generate and copy new encryption keys to the sending system regularly to provide an extra layer of security.</p>
<h3 id="p912883" fragmentId="26169" class="heading3"><strong class="specialbold">Step 1.</strong> Configure the Encryption Key in Site Manager </h3>
<p id="p912884" fragmentId="27532" class="bodytext">When the Encryption key is configured and generated in Site Manager this enables URL parameter encryption for the sites in Site Manager and the embedded URLs in the Reservation Confirmation email. This is the only step required if the site is using MCP Site Manager as the content management system for the site. The fields for the encryption key allow for the input of the encryption key so multiple sites may use the same encryption key.</p>
<ol class="listnumber2"><li id="p912885" fragmentId="26126" class="listnumber2">In Site Manager go to<strong class="specialbold"> Site Settings</strong> and select <strong class="specialbold">Manage Sites </strong>from the left navigation.</li><li id="p912886" fragmentId="26140" class="listnumber2">Select the site's <strong class="specialbold">Backend Settings. </strong><br><br><img id="f3997" src="backend_settings.png" class="microslinkedgraphictemplate" alt="" height="332" width="1448" vspace="6" hspace="0" align="bottom" border="0"></li><li id="p912887" fragmentId="25894" class="listnumber2">Select the <strong class="specialbold">Encryption</strong> tab.</li><li id="p912888" fragmentId="27540" class="listnumber2">To enable each encryption functionality check the appropriate checkbox: <br>(By default the encryption functionality will be disabled for all sites.) </li></ol><ul class="listbullet3"><li id="p912889" fragmentId="27541" class="listbullet3"><strong class="specialbold">Enable encryption</strong>. Select this checkbox to enable URL Parameter Encryption. </li><li id="p912890" fragmentId="27542" class="listbullet3"><strong class="specialbold">Enable JSON Encryption.</strong> To encrypt JSON messages, select the checkbox, encrypting the JSON messages is independent from URL Encryption. <ol class="listnumber2"><li id="p912891" fragmentId="26189" class="listnumber2">Select the <strong class="specialbold">Encryption</strong> <strong class="specialbold">Method.</strong><br>If choosing to use greater than 128 bit encryption both the client and receiving server Java will need to be updated replacing the <strong class="specialbold">local_policy.jar</strong> and <strong class="specialbold">US_export_policy.jar</strong>.<p id="p912892" fragmentId="26192" class="listcontinue2">Each encryption method is a combination of Encryption Algorithm (AES, DESede, Blowfish), the block cipher mode of operation (CBC) , the block padding method (PKCS5Padding) and the key length (128, 192, 256, …). Although many algorithms, modes, paddings and key lengths are available, the combinations provided are the most commonly used and most effective against security attacks. (See Additional Notes Below.)</p>
</li><li id="p912893" fragmentId="26139" class="listnumber2">Click the <strong class="specialbold">Generate Key </strong>button to generate the new Encryption Key.</li><li id="p912894" fragmentId="13665" class="listnumber2">Select <strong class="specialbold">Save </strong>to save the changes.</li><li id="p912895" fragmentId="27509" class="listnumber2"><strong class="specialbold">Verify the Settings and Save. </strong>When the encryption key saves successfully a message confirming the site is encrypted displays.<p id="p912896" fragmentId="26141" class="listnote"><strong class="specialbold">Note.</strong> Take note of the generated Encryption Key, in order to configure the &quot;Sending System&quot; with the same parameters and key obtained during the process.</p>
</li></ol><p id="p912897" fragmentId="98" class="listcontinue"><img id="f3965" src="encryption.png" class="microslinkedgraphictemplate" alt="" height="393" width="1456" vspace="6" hspace="0" align="bottom" border="0"></p>
</li></ul><h4 id="p912898" fragmentId="26157" class="heading4">Encryption Method Notes</h4>
<p id="p912899" fragmentId="26158" class="bodytext">Some countries have regulations regarding the maximum length of the &quot;Encryption Key&quot; that can be used to exchange encrypted data with other countries. Please make sure your configuration follows the regulations in place.</p>
<p id="p912900" fragmentId="26159" class="bodytext">The receiving system will not be able to process encrypted parameters unless both, the sending system and the receiving system are configured with the exact same parameters and encryption key. Make sure to destroy any notes taken in order to transfer the encryption parameters to the sending system. There is no need to keep this information stored anywhere but in the communicating systems.</p>
<h4 id="p912901" fragmentId="25946" class="heading4">Automatic Encryption of URL Links Embedded in Outgoing Confirmation Emails when Encryption is Enabled</h4>
<p id="p912902" fragmentId="26149" class="bodytext">Once Encryption key is generated and saved in Site Manger the embedded URLs in the Reservation Confirmation Email are encrypted. These emails are generated using templates that are created by an authorized user. To access the email templates in <strong class="specialbold">Site Manager</strong> &gt; go to the <strong class="specialbold">Content </strong>tab &gt; and go to<strong class="specialbold"> Email Templates </strong>on the left navigation. See Also: <a id="h1023" class="jumptemplate" title="Email Templates Overview" href="email_templates_overview_712_webhotel_site_manager.htm" target="_self">Email Templates</a></p>
<h3 id="p912903" fragmentId="26175" class="heading3"><br><strong class="specialbold">Step 2. </strong>Construct IBE URLs with Encrypted Parameters (Deep Links) </h3>
<p id="p912904" fragmentId="26172" class="bodytext"><strong class="specialbold">Optional Step:</strong> Only required when using the IBE links instead of hosting the site in Site Manager exclusively.<br>See Also: <a id="h4410" class="jumptemplate" title="Internet Booking Engine (for Mobile Sites)" href="4081.htm" target="_self">Internet Booking Engine Widget</a></p>
<p id="p912905" fragmentId="26150" class="bodytext">When the booking path pages are called via a &quot;deep link&quot; and parameters should be passed along with the URL, this functionality provides the ability to encrypt those parameters on the sending side and decrypt them automatically on the receiving side, as long as both the sender and the receiver are configured with the same encryption parameters and use the same &quot;symmetric&quot; encryption key.</p>
<p id="p912906" fragmentId="25904" class="listcontinue"><strong class="specialbold">Sending System.</strong> The Hotel's website using the IBE URLs (deep links)</p>
<p id="p912907" fragmentId="25905" class="listcontinue"><strong class="specialbold">Receiving System.</strong> MCP is the receiving system.</p>
<p id="p912908" fragmentId="26151" class="bodytext">In <strong class="specialbold">Site Manager</strong> go to the <strong class="specialbold">Motif Management</strong> &gt; <strong class="specialbold">Internet Booking Engine Widget</strong> to construct the IBE URLs adding the encryption key before the parameters in the URL. Resulting in a string containing the encrypted &quot;url parameters&quot; or &quot;query string&quot; using the following format: http://&lt;site-url&gt;/&lt;resources&gt;?data=&lt;encrypted data&gt;<br></p>
<h4 id="p912909" fragmentId="27530" class="heading4">Example actual IBE deep link structure with URL Encryption:</h4>
<p id="p912910" fragmentId="25731" class="bodytext">http://&lt;site-url&gt;/bp/availStart.jsp?data=360b05bd5ca8ada196ca9bafb0fe6bac321baa91d72682460a9c917107c0c81a5e3fe63258a978042c7fedc</p>
<h3 id="p912911" fragmentId="27535" class="heading3"><br><strong class="specialbold">Step 3. </strong>Encrypting the URL Parameters on a Sending Site</h3>
<h4 id="p912912" fragmentId="26182" class="heading4">Working with a 3rd Party Website </h4>
<p id="p912913" fragmentId="27510" class="bodytext">This is only an illustration of one method that could be used MICROS does not support this part of the process. The sending system needs to implement an application that will be able to encrypt the parameters on the URL before sending them. The following sample code illustrates a process that could be followed by the sending system.  </p>
<h4 id="p912914" fragmentId="25925" class="heading4">Sample Code Disclaimer:</h4>
<p id="p912915" fragmentId="25941" class="bodytext">Micros Systems Inc. grants a non-exclusive copyright license to use this programming code sample from which you can generate similar function tailored to your site's specific needs. This code sample has not been thoroughly tested under all conditions and is provided for illustrative purposes only. Micros Systems Inc. cannot guarantee or imply reliability, serviceability, or function of this code sample. The sample program contained herein is provided to you &quot;AS IS&quot; without any warranties of any kind and the implied warranties of non-infringement, merchantability and fitness for a particular purpose are expressly disclaimed.</p>
<p id="p912916" fragmentId="26179" class="bodytext">To Download a Sample Java Code File right click  <a class="" title="" href="files/EncryptionUtil.java" target="_self">this link </a> and select save as. </p>
<h4 id="p912917" fragmentId="25740" class="heading4">Sample Code</h4>
<p id="p912918" fragmentId="98" class="bodytext"><img id="f3962" src="java_example.png" class="microslinkedgraphictemplate" alt="" height="1486" width="1017" vspace="6" hspace="0" align="bottom" border="0"></p>
<h3 id="p912919" fragmentId="25735" class="heading3">Sample Code (Typical) Output</h3>
<p id="p912920" fragmentId="25921" class="listcontinue"><strong class="specialbold">Transformation</strong>: AES/CBC/PKCS5Padding (128)</p>
<p id="p912921" fragmentId="25922" class="listcontinue"><strong class="specialbold">Secret Key: </strong>71335a57d480c1d06a261d7194d296ca</p>
<p id="p912922" fragmentId="25923" class="listcontinue"><strong class="specialbold">Plain text: </strong>lastName=Doe&amp;firstName=John&amp;nameId=12345</p>
<p id="p912923" fragmentId="25737" class="listcontinue"><strong class="specialbold">Encrypted string: </strong>360b05bd5ca8ada196ca9bafb044fe6bac321baa91d72682460a9c917107c0c81a5e3f21e63258a978042c7fedca58c25937e2fdeb4197cf5d7ed1bd1073db84</p>
<p id="p912924" fragmentId="25738" class="listcontinue"><strong class="specialbold">Decrypted text:</strong> lastName=Doe&amp;firstName=John&amp;nameId=12345</p>
<p id="p912925" fragmentId="25953" class="note"><strong class="specialbold">Note: </strong>The encrypted string will be different every time the program is run. This is a good quality of the encryption procedure utilized and is due to the use of a random initialization vector (IV) on every encryption attempt.</p>
<h1 id="p912926" fragmentId="87" class="heading1">See Also</h1>
<p id="p912927" fragmentId="14189" class="bodytext">Backend Configuration Settings</p>
<p id="p912928" fragmentId="14185" class="bodytext">Pages SEO</p>
<p id="p912929" fragmentId="1" class="bodytext"></p>

<br><br><div class="footerbar"><p class="style5 style1">© 2014 MICROS Systems, Inc. All rights reserved.</div>
</div>
<div id="Layer2"><!-- Insert Your Footer Here --></div>

</body>
</html>
